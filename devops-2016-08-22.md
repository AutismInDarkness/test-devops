# DevOps test from Wiredcraft

Make sure you read **all** of this document carefully, and follow the guidelines in it.

## Background

The purpose of this test is to:

- evaluate your technical knowledge
- evaluate your communication with the team
- evaluate your ability to learn

## Preamble

DevOps at wiredcraft involves a lot of different technologies and DevOps engineers are expected to be able to navigate through them efficiently.

The mindset and ability to think out of the box is a critical asset for DevOps. We don't expect everyone to know everything about everything, but we need them to have the mindset and critical thinking to dig into issues. We expect the DevOps engineers to use their skills to overcome difficulties and come with solutions or approaches to solutions.

This is the reason the target of this task is quite broad and may involve technologies you may not (yet) be familiar with.

## Thchnical stack

Here is the list of the technologies that we can use in the test:

* Ansible
* Jekyll or Hugo
* Git
* Programming Language: Python / Shell or any other language.
* `fortune` which is a shell command generating quote / adage from famous people.


## Task

Our test is comprised of two aspects: development and operations.

### Sub-task 1

For the development part, you need to build a website based on Jekyll or Hugo, upon which, a new page should be generated each time after running a script you are going to write. New page should also needs to be added to git repo, committed, tagged with version number and pushed to github with this script.

In detail, you should do the following things:

* Choose whichever static site generator to use and prepare the basic site:
  * [Jekyll](https://jekyllrb.com)
  * [Hugo](https://gohugo.io)

* Prepare the template, the page itself is based on a template which you are going to write on your will with your own design, requiring:
  * Simple yaml header with version number and text.
  * Simple content template to put the text and version number in the footer.
  * Style is optional.

* Create a script that will:
  * Create a new post relying on the template previously defined.
  * Update the version incrementally.

* Based on the description above, remember there is a number of items needs to be filled in this template when generating new page with the script:
  * The quote / adage you get from `fortune` command.
  * The version number of this change.

* The script accept one argument passed to it, and then behave accordingly, the choices are:
  * dev - increase the version by 0.0.1, genereate a new page the way described above, and then push it to github.
  * staging - increase the version by 0.1 (eg: from `0.1.5` to `0.2.0`), tag it and then push it to github.

### Sub-task 2

For the operation part, you need to write ansible playbook to create an environment serving two versions (dev and staging) of this project as two websites, which can update itself by synchronizing the codebase from github say every n minutes if there is actual change in github repo.

The playbook should be able to do the following things:

* Spawn a box with:
  * ubuntu 16.04
  * Nginx with configuration supporting two domains: dev & staging
  * Ruby / Jekyll or Go, this depend on the choice of your dev project above.

* Configure the box to:
  * Compile and build the code (jekyll or hugo)
  * Deploy the dev / staging environments accordingly.

* Prepare automated task to run the created script mentioned in development part.
  * Update dev environemnt every 10 minutes.
  * Update staging environment every 1 hour.

* Prepare automated task to auto update the served sites every 5 minutes following roles:
  * if there is new commit, then update the dev server
  * if there is new tag, then update the staging server

# Getting Started

There's nothing here, we leave it to you to choose the build tool, code structure, framework, testing approach...

# Requirements

- With clear documentation on how to run the code
- Use git to manage code

# What We Care About

Feel free to schedule your work, ask questions.

We're interested in your method and how you approach the problem just as much as we're interested in the end result.

Here's what you should aim for:

- Comments in your scripts
- Comments in your playbooks
- Clean README file that explains how things work
- Extensible work / code (use variables, limit hardcoded values, etc.)

# Q&A

- Where should I send back the result when I'm done?

Fork this repo and send us a pull request when you think you are done. We don't have deadline for the task.

- What if I have question?

Create a new issue in the repo and we will get back to you very quickly. You can also jump on Slack and talk with us.

# Extra

If there is a need for servers, let us know, we can provision boxes for the tests.
